{"ast":null,"code":"var _jsxFileName = \"/Users/gimtaehunegimtaehune/Documents/GitHub/gaetaeng/BetBall/src/components/GameCanvas.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GameCanvas = ({\n  players,\n  gameStarted\n}) => {\n  _s();\n  const canvasRef = useRef(null);\n  const [obstacles, setObstacles] = useState([]); // 장애물 상태\n  const [ballPositions, setBallPositions] = useState([]); // 공들의 위치 상태\n  const [ballVelocities, setBallVelocities] = useState([]); // 공들의 속도 상태\n  const [ballColors, setBallColors] = useState([]); // 공 색상 상태\n\n  // 장애물 초기화 함수\n  const initializeObstacles = () => {\n    const newObstacles = [{\n      x: 100,\n      y: 150,\n      width: 50,\n      height: 10\n    },\n    // 장애물 1\n    {\n      x: 250,\n      y: 250,\n      width: 50,\n      height: 10\n    },\n    // 장애물 2\n    {\n      x: 400,\n      y: 350,\n      width: 50,\n      height: 10\n    } // 장애물 3\n    ];\n    setObstacles(newObstacles); // 장애물 상태 업데이트\n  };\n\n  // 공 초기화 함수\n  const initializeBalls = () => {\n    const initialPositions = players.map((_, index) => ({\n      x: 50 + index * 100,\n      y: 100 // 초기 Y 위치\n    }));\n    const initialVelocities = players.map(() => ({\n      dx: 0,\n      // X 속도\n      dy: 2 // Y 속도 (낙하하는 속도)\n    }));\n    const colors = ['red', 'blue', 'green', 'yellow', 'purple']; // 공 색상 설정\n    setBallPositions(initialPositions); // 공의 위치 상태 업데이트\n    setBallVelocities(initialVelocities); // 공의 속도 상태 업데이트\n    setBallColors(colors.slice(0, players.length)); // 공 색상 설정\n  };\n\n  // 게임 시작 시 공 초기화\n  useEffect(() => {\n    if (gameStarted) {\n      initializeBalls(); // 게임 시작 시 공 초기화\n      initializeObstacles(); // 장애물 초기화\n    }\n  }, [gameStarted, players]);\n\n  // 충돌 감지 함수 (공과 장애물)\n  const checkCollisions = () => {\n    const updatedBallPositions = [...ballPositions];\n    const updatedBallVelocities = [...ballVelocities];\n    updatedBallPositions.forEach((ball, index) => {\n      obstacles.forEach(obstacle => {\n        // 충돌 감지: 공과 장애물이 겹치는지 확인\n        if (ball.x + 20 > obstacle.x &&\n        // 공이 장애물의 x 범위에 있을 때\n        ball.x - 20 < obstacle.x + obstacle.width &&\n        // 공이 장애물의 x 범위에 있을 때\n        ball.y + 20 > obstacle.y &&\n        // 공이 장애물의 y 범위에 있을 때\n        ball.y - 20 < obstacle.y + obstacle.height // 공이 장애물의 y 범위에 있을 때\n        ) {\n          // 충돌이 감지되면 반응: 공의 y 속도를 반전시킴 (공이 장애물 위로 튕기게 함)\n          updatedBallVelocities[index].dy = -updatedBallVelocities[index].dy;\n\n          // 공을 장애물 위로 올려줌\n          updatedBallPositions[index].y = obstacle.y - 20; // 공을 장애물 위로 이동\n        }\n      });\n    });\n    setBallPositions(updatedBallPositions);\n    setBallVelocities(updatedBallVelocities);\n  };\n\n  // 게임을 그리기 위한 useEffect\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    const drawGame = () => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height); // 캔버스를 지운다\n\n      // 장애물 그리기\n      obstacles.forEach(obstacle => {\n        ctx.fillStyle = 'black'; // 장애물 색상\n        ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height); // 장애물 그리기\n      });\n\n      // 공 그리기\n      ballPositions.forEach((ball, index) => {\n        ctx.beginPath();\n        ctx.arc(ball.x, ball.y, 20, 0, Math.PI * 2); // 공 그리기\n        ctx.fillStyle = ballColors[index]; // 공 색상 설정\n        ctx.fill();\n        ctx.stroke();\n\n        // 공 위에 참여자 이름 표시\n        ctx.fillStyle = 'black'; // 이름 색상\n        ctx.font = '12px Arial';\n        ctx.fillText(players[index], ball.x - 20, ball.y - 30); // 공 위에 이름\n\n        // 공의 위치 업데이트 (속도에 따라)\n        ball.y += ballVelocities[index].dy;\n        ball.x += ballVelocities[index].dx;\n\n        // 공이 바닥에 닿았으면 위치 고정\n        if (ball.y >= canvas.height - 20) {\n          ball.y = canvas.height - 20; // 바닥에 닿으면 위치 고정\n        }\n      });\n\n      // 충돌 체크 및 공의 위치/속도 업데이트\n      checkCollisions();\n    };\n\n    // 게임 루프\n    const gameInterval = setInterval(drawGame, 16); // 60fps로 게임을 그리기\n\n    return () => clearInterval(gameInterval); // 컴포넌트 언마운트 시 인터벌 정리\n  }, [players, obstacles, ballPositions, ballVelocities, ballColors, gameStarted]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      width: \"800\",\n      height: \"600\",\n      style: {\n        background: 'rgb(240, 240, 240)'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 5\n  }, this);\n};\n_s(GameCanvas, \"Fxma/OUCEWEU2kDNOptqeQzpGTI=\");\n_c = GameCanvas;\nexport default GameCanvas;\nvar _c;\n$RefreshReg$(_c, \"GameCanvas\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","GameCanvas","players","gameStarted","_s","canvasRef","obstacles","setObstacles","ballPositions","setBallPositions","ballVelocities","setBallVelocities","ballColors","setBallColors","initializeObstacles","newObstacles","x","y","width","height","initializeBalls","initialPositions","map","_","index","initialVelocities","dx","dy","colors","slice","length","checkCollisions","updatedBallPositions","updatedBallVelocities","forEach","ball","obstacle","canvas","current","ctx","getContext","drawGame","clearRect","fillStyle","fillRect","beginPath","arc","Math","PI","fill","stroke","font","fillText","gameInterval","setInterval","clearInterval","children","ref","style","background","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/gimtaehunegimtaehune/Documents/GitHub/gaetaeng/BetBall/src/components/GameCanvas.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\n\nconst GameCanvas = ({ players, gameStarted }) => {\n  const canvasRef = useRef(null);\n  const [obstacles, setObstacles] = useState([]); // 장애물 상태\n  const [ballPositions, setBallPositions] = useState([]); // 공들의 위치 상태\n  const [ballVelocities, setBallVelocities] = useState([]); // 공들의 속도 상태\n  const [ballColors, setBallColors] = useState([]); // 공 색상 상태\n\n  // 장애물 초기화 함수\n  const initializeObstacles = () => {\n    const newObstacles = [\n      { x: 100, y: 150, width: 50, height: 10 }, // 장애물 1\n      { x: 250, y: 250, width: 50, height: 10 }, // 장애물 2\n      { x: 400, y: 350, width: 50, height: 10 }, // 장애물 3\n    ];\n    setObstacles(newObstacles); // 장애물 상태 업데이트\n  };\n\n  // 공 초기화 함수\n  const initializeBalls = () => {\n    const initialPositions = players.map((_, index) => ({\n      x: 50 + index * 100,\n      y: 100, // 초기 Y 위치\n    }));\n\n    const initialVelocities = players.map(() => ({\n      dx: 0, // X 속도\n      dy: 2, // Y 속도 (낙하하는 속도)\n    }));\n\n    const colors = ['red', 'blue', 'green', 'yellow', 'purple']; // 공 색상 설정\n    setBallPositions(initialPositions); // 공의 위치 상태 업데이트\n    setBallVelocities(initialVelocities); // 공의 속도 상태 업데이트\n    setBallColors(colors.slice(0, players.length)); // 공 색상 설정\n  };\n\n  // 게임 시작 시 공 초기화\n  useEffect(() => {\n    if (gameStarted) {\n      initializeBalls(); // 게임 시작 시 공 초기화\n      initializeObstacles(); // 장애물 초기화\n    }\n  }, [gameStarted, players]);\n\n  // 충돌 감지 함수 (공과 장애물)\n  const checkCollisions = () => {\n    const updatedBallPositions = [...ballPositions];\n    const updatedBallVelocities = [...ballVelocities];\n\n    updatedBallPositions.forEach((ball, index) => {\n      obstacles.forEach((obstacle) => {\n        // 충돌 감지: 공과 장애물이 겹치는지 확인\n        if (\n          ball.x + 20 > obstacle.x && // 공이 장애물의 x 범위에 있을 때\n          ball.x - 20 < obstacle.x + obstacle.width && // 공이 장애물의 x 범위에 있을 때\n          ball.y + 20 > obstacle.y && // 공이 장애물의 y 범위에 있을 때\n          ball.y - 20 < obstacle.y + obstacle.height // 공이 장애물의 y 범위에 있을 때\n        ) {\n          // 충돌이 감지되면 반응: 공의 y 속도를 반전시킴 (공이 장애물 위로 튕기게 함)\n          updatedBallVelocities[index].dy = -updatedBallVelocities[index].dy;\n\n          // 공을 장애물 위로 올려줌\n          updatedBallPositions[index].y = obstacle.y - 20; // 공을 장애물 위로 이동\n        }\n      });\n    });\n\n    setBallPositions(updatedBallPositions);\n    setBallVelocities(updatedBallVelocities);\n  };\n\n  // 게임을 그리기 위한 useEffect\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n\n    const drawGame = () => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height); // 캔버스를 지운다\n\n      // 장애물 그리기\n      obstacles.forEach((obstacle) => {\n        ctx.fillStyle = 'black'; // 장애물 색상\n        ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height); // 장애물 그리기\n      });\n\n      // 공 그리기\n      ballPositions.forEach((ball, index) => {\n        ctx.beginPath();\n        ctx.arc(ball.x, ball.y, 20, 0, Math.PI * 2); // 공 그리기\n        ctx.fillStyle = ballColors[index]; // 공 색상 설정\n        ctx.fill();\n        ctx.stroke();\n\n        // 공 위에 참여자 이름 표시\n        ctx.fillStyle = 'black'; // 이름 색상\n        ctx.font = '12px Arial';\n        ctx.fillText(players[index], ball.x - 20, ball.y - 30); // 공 위에 이름\n\n        // 공의 위치 업데이트 (속도에 따라)\n        ball.y += ballVelocities[index].dy;\n        ball.x += ballVelocities[index].dx;\n\n        // 공이 바닥에 닿았으면 위치 고정\n        if (ball.y >= canvas.height - 20) {\n          ball.y = canvas.height - 20; // 바닥에 닿으면 위치 고정\n        }\n      });\n\n      // 충돌 체크 및 공의 위치/속도 업데이트\n      checkCollisions();\n    };\n\n    // 게임 루프\n    const gameInterval = setInterval(drawGame, 16); // 60fps로 게임을 그리기\n\n    return () => clearInterval(gameInterval); // 컴포넌트 언마운트 시 인터벌 정리\n  }, [players, obstacles, ballPositions, ballVelocities, ballColors, gameStarted]);\n\n  return (\n    <div>\n      <canvas ref={canvasRef} width=\"800\" height=\"600\" style={{ background: 'rgb(240, 240, 240)' }} />\n    </div>\n  );\n};\n\nexport default GameCanvas;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}